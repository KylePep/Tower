import{_ as h,b as w,w as k,d as i,P as d,r as v,o as n,c,a as e,e as E,F as l,f as m,t as x,A as r,l as b,g as u,h as T,i as C,j as I,p as S,k as P}from"./index-c8dfd137.js";import{a as p}from"./AttendeesService-2c7908fb.js";const M={setup(){async function a(){try{await x.getTowerEvents()}catch(o){d.error(o.message)}}async function _(){try{await p.getMyTickets()}catch(o){d.error(o.message)}}return w(()=>{a()}),k(()=>{_(r.account.id)}),{account:i(()=>r.account),tickets:i(()=>r.myTickets),myEvents:i(()=>{const o=r.events.filter(s=>s.creatorId==r.account.id);return b.log("[MY EVENTS]",o),o}),async removeTicket(o){try{await p.removeTicket(o)}catch(s){d.error(s.message)}}}}},f=a=>(S("data-v-98523a8d"),a=a(),P(),a),N={class:"row text-color-5 fs-1 fw-bold ps-3 py-3"},V={key:0},j={key:1,class:"row text-light"},A={class:"row text-color-5 fs-1 fw-bold pb-3"},B=f(()=>e("div",{class:"pb-3"}," Upcoming Events ",-1)),D={class:"row"},F={class:"row gradient-background rounded d-flex justify-content-between elevation-5"},U={class:"col-6 col-md-4 ps-0 position-relative"},Y=["src","alt"],L={key:0},$=f(()=>e("div",{class:"d-flex text-black-50 fs-1 fw-bold position-absolute cancelDisplay align-items-center justify-content-center px-5"},[e("div",null," Canceled ")],-1)),q=[$],z={class:"col-6 col-md-8 fs-4 d-flex flex-row justify-content-end align-items-center"},G=["onClick"];function H(a,_,o,s,J,K){const y=v("TowerEventCard"),g=v("router-link");return n(),c(l,null,[e("section",N,[E(" My Events "),s.myEvents?(n(),c("div",j,[(n(!0),c(l,null,m(s.myEvents,t=>(n(),c("div",{key:t.id,class:"col-12 col-md-3 mb-3"},[u(y,{towerEventProp:t},null,8,["towerEventProp"])]))),128))])):(n(),c("div",V," You have not created any events "))]),e("section",A,[B,e("section",D,[(n(!0),c(l,null,m(s.tickets,t=>(n(),c("div",{key:t.id,class:"col-12 col-md-7 m-auto pb-3 ps-4 pe-2"},[e("div",F,[e("div",U,[u(g,{to:{name:"Events",params:{eventId:t.event.id}}},{default:T(()=>[e("img",{src:t.event.coverImg,class:"img-fluid ticketImg",alt:t.event.name},null,8,Y)]),_:2},1032,["to"]),t.event.isCanceled!=!1?(n(),c("div",L,q)):C("",!0)]),e("div",z,[e("div",null,I(t.event.name),1),e("button",{onClick:O=>s.removeTicket(t.id),class:"btn btn-danger mx-2 my-3"},"Unattend",8,G)])])]))),128))])])],64)}const W=h(M,[["render",H],["__scopeId","data-v-98523a8d"]]);export{W as default};
